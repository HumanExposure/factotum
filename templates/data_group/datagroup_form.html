{% extends 'core/base.html' %}
{% load staticfiles %}

{% block content %}

  {% if field_error %}
  <p class="form-control is-invalid">CSV column headers are incorrect for upload.
     {{field_error}}, should read ['filename', 'title', 'document_type', 'product', 'url', 'organization']</p>
  {% endif %}

  {% if line_errors %}
  <p class="form-control is-invalid">CSV has bad data in row/s:
     {% for error in line_errors %}
        {{error}}
     {% endfor %}
     Please fix this before uploading.</p>
  {% endif %}

    <form method="post" enctype="multipart/form-data" novalidate>
        {% csrf_token %}
        {% include 'core/bs4_form.html' with form=form colspan='col-6'%}
        <button type="submit" class="btn btn-primary">Submit</button>
        <a class="btn btn-secondary" href="{% url 'data_group_list' %}">Cancel</a>
    </form>
    <br>
    <a id="reg" href="" class="btn btn-secondary">
      <span class="oi oi-spreadsheet"></span>&nbsp;Registered Records CSV Template
    </a>
    <table class="table" id="register" style="display:none;">
      <thead class="table-primary">
        <th>filename</th>
        <th>title</th>
        <th>document_type</th>
        <th>product</th>
        <th>url</th>
        <th>organization</th>
      </thead>
    </table>
{% endblock %}

{% block js %}
    <script src="{% static 'bootstrap_datepicker_plus/js/moment-with-locales.min.js' %}"></script>
    <script src="{% static 'bootstrap_datepicker_plus/js/bootstrap-datetimepicker.min.js' %}"></script>
    <script src="{% static 'bootstrap_datepicker_plus/js/datepicker-widget.js' %}"></script>
    <script src="{% static 'js/export.js' %}"></script>
    <script src="{% static 'js/data_group_form.js' %}"></script>
{% endblock %}

{% block css %}
    <link href="{% static 'bootstrap_datepicker_plus/css/bootstrap-datetimepicker.css' %}" type="text/css"
          media="all" rel="stylesheet" />
    <link href="{% static 'bootstrap_datepicker_plus/css/datepicker-widget.css' %}" type="text/css"
          media="all" rel="stylesheet" />
{% endblock %}
